## Структура проекта Next.js

### Верхнеуровневые папки
Какие верхнеуровневые папки есть в Next.js?
Для чего предназначена папка app?
Для чего предназначена папка pages?
Для чего предназначена папка public?
Для чего предназначена папка src?

### Файлы верхнего уровня
Какие файлы верхнего уровня используются в Next.js?
Для чего нужен файл instrumentation.(ts|js)?
Для чего нужен файл middleware.(ts|js)?
Что содержит файл next-env.d.ts?
## Файлы маршрутизации

Какие файлы участвуют в маршрутизации Next.js?
Для чего предназначен файл layout.(js|jsx|tsx)?
Для чего предназначен файл page.(js|jsx|tsx)?
Для чего предназначен файл loading.(js|jsx|tsx)?
Для чего предназначен файл not-found.(js|jsx|tsx)?
Для чего предназначен файл error.(js|jsx|tsx)?
Для чего предназначен файл global-error.(js|jsx|tsx)?
Для чего предназначен файл route.(js|ts)?
Для чего предназначен файл template.(js|jsx|tsx)?
Для чего предназначен файл default.(js|jsx|tsx)?
## Типы маршрутов

### Вложенные маршруты
Что такое вложенный маршрут?
Как создавать вложенные маршруты?

### Динамические маршруты
Что такое динамический маршрут?
Как создать динамический сегмент маршрута [folder]?
Как создать catch-all сегмент маршрута [...folder]?
Как создать optional catch-all сегмент маршрута [[...folder]]?

### Группы маршрутов
Что такое группа маршрутов (Route Group)?
Как создать группу маршрутов (folder)?
Как исключить папку/файл из маршрутизации (_folder)?
### Параллельные маршруты
Что такое Parallel Routes в Next.js?
Как использовать параллельные маршруты и именованные слоты?
Как работает именованный слот `@folder`?

### Перехваченные маршруты
Что такое Intercepted Routes?
Как перехватывать маршрут на том же уровне: `(.)folder`?
Как перехватывать маршрут на один уровень выше: `(..)folder`?
Как перехватывать маршрут на два уровня выше: `(..)(..)folder`?
Как перехватывать маршрут от корня: `(...)folder`?
## Метаданные и SEO

### Файлы метаданных
Какие существуют соглашения по файлам метаданных в папке app?
Какие файлы метаданных для иконок и соц. превью поддерживаются (favicon, icon, apple-icon, opengraph-image, twitter-image)?
Как генерировать иконки/изображения программно (`icon|apple-icon|opengraph-image|twitter-image` в .js|.ts|.tsx)?

### Карта сайта и robots.txt
Как создать и где разместить `sitemap.xml`?
Как сгенерировать динамическую карту сайта `sitemap.(js|ts)`?
Для чего нужен `robots.txt` и что в нём указывать?
Как сгенерировать `robots.(js|ts)` программно?
## Рендеринг и доступность маршрутов

### Иерархия компонентов
Какова иерархия рендеринга специальных компонентов: layout → template → error → loading → not-found → page?
В каком порядке монтируются специальные компоненты внутри сегмента маршрута?
Как работает рекурсивное вложение компонентов во вложенных маршрутах?

### Доступность маршрутов
Когда маршрут становится публично доступным?
Какую роль играет `page.(js|jsx|tsx)` в доступности маршрута?
Какую роль играет `route.(js|ts)` в доступности маршрута (API-маршруты)?
Какой контент отправляется на клиент при доступе к маршруту?
## Организация файлов

### Колокация файлов
Можно ли колоцировать (размещать рядом) файлы проекта внутри сегментов маршрутов?
Становятся ли колоцированные файлы маршрутизируемыми по умолчанию?
Обязательно ли хранить файлы проекта внутри папки `app`, или их можно держать вне её?

### Приватные папки
Что такое личные (приватные) папки в Next.js?
Как создать приватную папку с помощью префикса подчёркивания: `_folderName`?
Что означает приватная папка для системы маршрутизации (исключение папки и подпапок)?
Нужны ли приватные папки для колокации, если файлы в `app` и так безопасны?
В каких случаях приватные папки полезны (UI vs routing, организация, группировка, избегание конфликтов)?
Можно ли помечать «приватные» файлы вне приватных папок тем же шаблоном подчёркивания?
Как создать URL-сегмент, начинающийся с подчёркивания, через префикс `%5FfolderName`?
### Группы маршрутов
Что такое группы маршрутов (Route Groups) и как их создать `(folderName)`?
Влияют ли группы маршрутов на URL-путь?
Зачем использовать группы маршрутов (разделы сайта, намерения, команды)?
Как включать вложенные лэйауты на одном уровне сегмента с помощью групп?
Как создать несколько вложенных и несколько корневых лэйаутов через группы?
Как добавить лэйаут только для подмножества маршрутов в общем сегменте?

### Папка src
Что такое папка `src` в Next.js и зачем её использовать?
Почему полезно переносить `app` и код приложения в `src`?
Какие преимущества даёт разделение кода приложения и конфигурационных файлов?
Есть ли особенности или ограничения при использовании папки `src`?
## App Router - Основы

### Страницы и лэйауты
Что такое page в Next.js App Router и как создать страницу?
Как создать страницу с помощью файла `page.(js|jsx|tsx)` в App Router?
Что такое layout в Next.js App Router и как он работает?
Что такое prop `children` в layout компонентах?
Обязателен ли корневой `layout.(js|jsx|tsx)` в папке `app`?
Какие обязательные теги должен содержать корневой layout (`<html>`, `<body>`)?

### Маршрутизация
Что такое вложенный маршрут и из каких сегментов он состоит?
Для чего используются папки в Next.js (определение сегментов маршрута)?
Как создать вложенный маршрут через вложенные папки?
Как создать динамический сегмент маршрута `[segmentName]`?
Что такое динамический сегмент и для чего он используется?

### Параметры маршрутов
Могут ли layout компоненты получать доступ к `params` в динамических сегментах?
Как получить доступ к search parameters в Server Component через `searchParams`?
Как получить доступ к search parameters в Client Component через `useSearchParams`?
Когда использовать `searchParams` prop, а когда хук `useSearchParams`?
### Навигация
Какие основные способы навигации между маршрутами в Next.js?
Что такое компонент `Link` и как его использовать?
Какой HTML тег расширяет компонент `Link` (`<a>`)?

### Типизация
Во что разрешаются `params` в статических маршрутах (пустой объект `{}`)?
Что такое `PageProps` и `LayoutProps` и нужно ли их импортировать?
Как использовать типы `PageProps<'/blog/[slug]'>` для типизации props?
Как использовать типы `LayoutProps<'/dashboard'>` для типизации layout props?
## Рендеринг и производительность

### Серверный рендеринг
Где по умолчанию рендерятся маршруты в Next.js (на сервере)?
Почему клиенту нужно ждать ответа от сервера перед показом нового маршрута?
Чем являются layout и page в Next.js по умолчанию (React Server Components)?

### Типы рендеринга
Какие два типа серверного рендеринга существуют в Next.js?
Что такое статический рендеринг (Static Rendering/Prerendering)?
Когда происходит статический рендеринг (build time или revalidation)?
Что такое динамический рендеринг (Dynamic Rendering)?
Когда происходит динамический рендеринг (request time)?
В чём недостатки серверного рендеринга (задержка клиента)?

### Оптимизация производительности
Что такое предварительная загрузка (prefetching) в Next.js?
Что такое потоковая передача (streaming) в Next.js?
Что такое клиентский переход (client-side transition)?
### Prefetching
Что такое предварительная выборка (prefetching) маршрутов?
Что даёт предварительная выборка (мгновенная навигация)?
Когда компонент Link подгружает маршрут (при hover или в viewport)?
Какая часть маршрута будет предзагружена в статическом маршруте (полный маршрут)?
Какая часть маршрута будет предзагружена в динамическом маршруте (пропуск или частичная загрузка)?

### Streaming
Что такое streaming и как он работает?
Что даёт streaming динамическим маршрутам (частичная предзагрузка)?
Что нужно для работы streaming (файл loading.tsx)?
Как работает streaming под капотом в Next.js (Suspense boundary)?
Какие преимущества даёт loading.tsx (мгновенная навигация, интерактивность, Core Web Vitals)?

### Клиентские переходы
Что такое клиентский переход и как он работает с Link компонентом?
Чем клиентский переход отличается от полной перезагрузки страницы?
Как клиентский переход сохраняет состояние и интерактивность?
Что может замедлить переходы между маршрутами?
## Server и Client Components

### Когда использовать
Когда следует использовать серверные компоненты в Next.js?
Когда следует использовать клиентские компоненты в Next.js?
Какие возможности есть у серверных компонентов (fetch данных, API ключи, уменьшение JS)?
Какие возможности есть у клиентских компонентов (state, события, браузерные API, хуки)?

### Как работают
Как работают серверные компоненты в Next.js (рендеринг на сервере)?
Как работают клиентские компоненты в Next.js (гидратация на клиенте)?
На какие этапы делится рендеринг на сервере (RSC Payload + HTML)?
Что такое React Server Component Payload (RSC Payload)?
Что содержит RSC Payload (результат серверных компонентов, плейсхолдеры, props)?
Что такое Hydration (прикрепление обработчиков событий к DOM)?
На какие этапы делится рендеринг на клиенте (HTML + RSC + JS)?

### Создание и использование
Как создать клиентский компонент с помощью директивы 'use client'?
Что такое директива 'use client' и где её размещать?
Какие способы передачи данных от серверного компонента в клиентский существуют (props, use Hook)?
Какими должны быть свойства, передаваемые в клиентский компонент (сериализуемые React)?
Как передать серверный компонент в клиентский (через children prop)?

### Безопасность и контекст
Как предотвратить случайное попадание серверного кода на клиент (server-only пакет)?
Как использовать React Context в Next.js (через клиентский провайдер)?
Как работать с третьими компонентами, которые используют клиентские фичи?
Где следует размещать провайдеры контекста (как можно глубже в дереве)?
Что такое "environment poisoning" и как его избежать?
Какие переменные окружения доступны на клиенте (NEXT_PUBLIC_ префикс)?
Как использовать пакеты server-only и client-only для предотвращения ошибок?
## Partial Prerendering (PPR)

### Основы PPR
Что такое Partial Prerendering (PPR) в Next.js?
Как работает Partial Prerendering (PPR) - статический shell + динамические holes?
Как работает статический рендеринг HTML (build time или revalidation)?
Как работает частичный предварительный рендеринг (статический shell + асинхронные holes)?
Что такое динамический рендеринг (request time)?

### Динамические компоненты
Когда компонент становится динамическим (cookies, headers, searchParams, unstable_noStore)?
Какие API делают компонент динамическим в PPR?
Как использовать Suspense для создания динамических границ в PPR?
Как работает streaming в PPR (параллельная загрузка chunks)?

### Настройка PPR
Как включить Partial Prerendering в next.config.ts (experimental.ppr: 'incremental')?
Как включить PPR для конкретного маршрута (experimental_ppr = true)?
Применяется ли experimental_ppr ко всем дочерним сегментам маршрута?
Как отключить PPR для дочерних сегментов (experimental_ppr = false)?

### Преимущества PPR
Какие преимущества даёт PPR (быстрая загрузка + персонализированный контент)?
Как PPR улучшает производительность (статический shell + параллельный streaming)?
## Работа с данными

### Извлечение данных
Как извлечь данные в серверных компонентах (fetch API, ORM, база данных)?
Кэшируются ли fetch запросы по умолчанию в Next.js?
Какие есть два способа извлечения данных в клиентских компонентах (use hook, SWR/React Query)?
Какой хук использовать для потоковой передачи данных с сервера на клиент (use hook)?
Как использовать fetch API в серверных компонентах (async/await)?

### Кэширование
Как работает дедупликация fetch запросов (request memoization)?
Как работает Data Cache в Next.js (cache: 'force-cache')?
Как использовать React cache функцию для дедупликации запросов?
Что такое request memoization и как она работает?
Как отключить request memoization (Abort signal)?
Как работает Data Cache vs request memoization (scope и lifetime)?

### Streaming данных
Как работает streaming в Next.js (разбивка HTML на chunks)?
Какие есть два способа реализации streaming (loading.js, Suspense)?
Как работает loading.js файл (автоматический Suspense boundary)?
Как использовать Suspense для гранулярного streaming?
Как создать осмысленные loading states (skeletons, spinners)?
## Server Actions

### Основы Server Actions
Что такое Server Function в Next.js (асинхронная функция на сервере)?
Что такое Server Action и чем она отличается от Server Function?
Когда вызывается Server Action (автоматически с startTransition)?
Как определить Server Action (async функция с startTransition)?
Что такое директива 'use server' и где её размещать?

### Создание и использование
Как использовать Server Functions в клиентских компонентах (импорт из файла)?
Какие два основных способа вызова Server Function существуют (forms, event handlers)?
Как создать Server Function в отдельном файле ('use server' в начале файла)?
Как создать Server Function в Server Component (inline с 'use server' в функции)?
Как передать Server Action в форму через action prop?
Как передать Server Action в кнопку через formAction prop?
Как передать Server Action в клиентский компонент через props?

### Особенности работы
Как работает progressive enhancement в Server Components (работа без JS)?
Как работает очередь отправки форм в Client Components (до гидратации)?
Какой HTTP метод используется для Server Actions (POST)?
Как Server Actions интегрируются с кэшированием Next.js?
Можно ли вызывать Server Functions параллельно (нет, по одной)?

### Отличия от Route Handlers
Что такое Route Handler и чем он отличается от Server Action?
## Кэширование

### Основы кэширования
Что такое кэширование в Next.js (хранение результатов для ускорения)?
Какие API есть в Next.js для реализации кэширования (fetch, unstable_cache, revalidateTag, revalidatePath)?

### Fetch кэширование
Как кэшировать fetch запросы (cache: 'force-cache')?
Как реализовать повторную проверку данных fetch запросом (next.revalidate)?

### Функциональное кэширование
Что делает unstable_cache (кэширование результатов функций)?
Какие параметры принимает функция unstable_cache (функция, ключи, опции)?

### Инвалидация кэша
Для чего нужен revalidateTag (инвалидация кэша по тегам)?
Для чего нужен revalidatePath (инвалидация кэша по пути)?
## Обработка ошибок

### Типы ошибок
Какие две категории ошибок существуют в Next.js (ожидаемые и неперехваченные)?
Что такое ожидаемые ошибки (expected errors) и как их обрабатывать?
Что такое неперехваченные исключения (uncaught exceptions) и как их обрабатывать?

### Обработка ожидаемых ошибок
Как обрабатывать ожидаемые ошибки в Server Functions (useActionState hook)?
Как использовать useActionState для обработки ошибок в формах?
Как обрабатывать ожидаемые ошибки в Server Components (условный рендеринг)?
Как использовать функцию notFound() для показа 404 страницы?
Как создать кастомную 404 страницу с помощью not-found.js?

### Error Boundaries
Что такое error boundaries в Next.js и как они работают?
Как создать error boundary с помощью error.js файла?
Какие props получает error boundary компонент (error, reset)?
Как работает вложенная иерархия error boundaries?
Какие ошибки НЕ ловят error boundaries (event handlers, async code)?

### Обработка специфических ошибок
Как обрабатывать ошибки в event handlers (try/catch + useState)?
Как обрабатывать ошибки в startTransition (всплытие к error boundary)?

### Глобальные error boundaries
Как создать глобальный error boundary с помощью global-error.js?
Какие обязательные теги должен содержать global-error компонент (html, body)?
Чем отличается global-error от обычного error boundary?
Как использовать функцию reset() для восстановления после ошибки?
Как логировать ошибки в error reporting сервис?
## CSS и стили

### Порядок CSS
Как обеспечить предсказуемый порядок CSS в Next.js?
Как избежать дублирования импортов стилей (shared components)?
Как использовать cssChunking опцию в next.config.js?

### CSS в development и production
Как работают CSS обновления в development (Fast Refresh)?
Как работают CSS файлы в production (конкатенация, минификация, code-splitting)?
Загружается ли CSS без JavaScript в production?
Требуется ли JavaScript для CSS в development (Fast Refresh)?
Почему CSS ordering может отличаться в development vs production?
Как проверить финальный порядок CSS (next build)?
## Компонент Image

### Основы next/image
Какие три основные проблемы с изображениями решает компонент next/image?
Что такое layout shift и как его предотвратить с помощью next/image?
Как автоматически оптимизируются изображения в Next.js (форматы, размеры)?
Какие форматы изображений поддерживает Next.js (AVIF, WebP)?

### Локальные изображения
Как использовать next/image с локальными изображениями из public директории?
Почему важно указывать width и height для изображений?

### Внешние изображения
Как использовать next/image с внешними изображениями (remote images)?
Как настроить allowlist доменов для внешних изображений в next.config.js?

### Свойства и настройки
Как использовать prop fill для изображений на весь родительский контейнер?
Что такое prop sizes и зачем он нужен при использовании fill?
Как работает prop quality (по умолчанию 75%)?
Как создать blur placeholder для изображений?
Какие значения object-fit можно использовать (cover, contain, none)?

### Использование в макетах
Как использовать next/image в CSS Grid для создания галереи?
Как работает responsive поведение next/image по умолчанию?

### Loaders и оптимизация
Что такое loaders в next/image и для чего они нужны?
Как настроить кастомный loader для внешнего сервиса оптимизации?
Чем отличается next/image от обычного HTML img тега?
Как next/image предотвращает Cumulative Layout Shift (CLS)?

### Функции компонента Image
Какие четыре основные функции предоставляет компонент Image от Next.js?
Что такое size optimization и как Next.js автоматически подаёт правильно размерные изображения?
Что такое visual stability и как next/image предотвращает layout shift?
Как next/image ускоряет загрузку страниц через lazy loading?
Что такое asset flexibility и как next/image изменяет размер изображений по требованию?

### Импорт и использование
Как импортировать и использовать компонент Image из next/image?
Какие обязательные props нужны для компонента Image (src, alt)?
Может ли src property быть локальным или удалённым изображением?

### Локальные изображения (детально)
Как работать с локальными изображениями в Next.js?
Где хранить статические файлы, включая изображения (папка public)?
Как ссылаться на файлы из папки public (начиная с базового URL /)?
Как использовать локальное изображение с указанием width и height?
Почему важно указывать width и height для предотвращения layout shift?

### Автоматическое определение размеров
Как работает автоматическое определение размеров при статическом импорте?
Когда Next.js автоматически определяет intrinsic width и height?
Как статический импорт изображения влияет на предотвращение CLS?
Что такое blurDataURL и как он работает автоматически?
Как включить placeholder="blur" для размытого плейсхолдера?

### Удалённые изображения (детально)
Как работать с удалёнными изображениями в Next.js?
Как использовать URL строку для src property с удалённым изображением?
Почему для удалённых изображений нужно вручную указывать width и height?
Как использовать prop fill для заполнения размера родительского элемента?
Что такое aspect ratio и как его определяет next/image?

### Безопасность удалённых изображений
Как настроить безопасное использование удалённых изображений?
Для чего нужна настройка remotePatterns в next.config.js?
Как предотвратить malicious usage при использовании удалённых изображений?
Как настроить allowlist доменов для внешних изображений?
Какие параметры можно указать в remotePatterns (protocol, hostname, port, pathname)?
Как настроить доступ к изображениям из конкретного AWS S3 bucket?
Почему важно быть максимально специфичным в настройках remotePatterns?

## Метаданные (детально)

### Типы метаданных
Какие 2 мета поля всегда есть даже если маршрут не определяет метаданные?
Что такое статические метаданные?
Что такое сгенерированные метаданные?
Что такое потоковые метаданные?

### Специальные файлы метаданных
Какие существуют специальные файлы для метаданных?
Для чего нужны фавиконы?
Для чего нужно Open Graph?

## Route Handlers

### Основы Route Handlers
Что такое Route Handlers и для чего они нужны?
Где доступны Route Handlers (только в app directory)?
Чем Route Handlers отличаются от API Routes в pages directory?
Можно ли использовать API Routes и Route Handlers вместе?

### Создание Route Handlers
Как создать Route Handler в файле route.js|ts?
Где можно размещать Route Handlers в app directory?
Может ли route.js находиться на том же уровне сегмента, что и page.js?

### HTTP методы
Какие HTTP методы поддерживают Route Handlers?
Что происходит при вызове неподдерживаемого HTTP метода (405 Method Not Allowed)?

### NextRequest и NextResponse
Что такое NextRequest и NextResponse APIs?
Чем NextRequest и NextResponse отличаются от нативных Request и Response?

### Кэширование Route Handlers
Кэшируются ли Route Handlers по умолчанию?
Как включить кэширование для GET методов?
Как использовать export const dynamic = 'force-static' для кэширования?

### Special Route Handlers
Что такое Special Route Handlers (sitemap.ts, opengraph-image.tsx, icon.tsx)?
Остаются ли Special Route Handlers статичными по умолчанию?

### Route Resolution
Как работает Route Resolution в Route Handlers?
Участвуют ли Route Handlers в layouts или client-side navigation?
Может ли route.js и page.js находиться в одном сегменте маршрута?
Какой конфликт возникает при наличии page.js и route.js в одном сегменте?

### Типизация
Что такое RouteContext helper в TypeScript?
Как типизировать context parameter для Route Handlers?
Когда генерируются типы (next dev, next build, next typegen)?

## Middleware

### Основы Middleware
Что такое Middleware и когда он выполняется?
Какие действия может выполнять Middleware с запросом?
Как Middleware может модифицировать response (rewriting, redirecting, headers)?

### Когда использовать Middleware
В каких сценариях Middleware эффективен?
Когда Middleware подходит для быстрых редиректов?
Как использовать Middleware для A/B тестов или экспериментов?
Как Middleware может модифицировать headers для всех или части страниц?

### Когда НЕ использовать Middleware
В каких случаях Middleware НЕ подходит?
Почему Middleware не подходит для медленного data fetching?
Почему Middleware не подходит для session management?
Почему fetch с options.cache, options.next.revalidate, options.next.tags не работает в Middleware?

### Создание и организация
Где создать файл middleware.ts или middleware.js?
На каком уровне должен находиться middleware.ts (root или src)?
Может ли быть несколько middleware.ts файлов в проекте?
Как организовать middleware логику в модули?

### Базовый middleware
Как создать базовый middleware с NextResponse.redirect?
Что такое config.matcher в middleware?
Что означает '/about/:path*' в matcher?

### API и функции
Как использовать NextRequest и NextResponse в middleware?
Можно ли пометить middleware функцию как async?

