## Layouts и Pages (Макеты и страницы)

Next.js использует файловую систему для роутинга: папки определяют сегменты маршрутов, а специальные файлы (например, `page.tsx`, `layout.tsx`) создают UI для этих сегментов. На этой странице — как создавать страницы и макеты, как их вкладывать и связывать между собой.

---

## Создание страницы (Page)

Страница — это UI, привязанный к конкретному маршруту. Чтобы создать страницу, добавьте файл `page.tsx` внутри папки сегмента (например, в корне `app` для `/`) и экспортируйте по умолчанию React‑компонент.

---

## Создание макета (Layout)

Макет — это общий UI, который разделяют несколько страниц. При навигации макеты сохраняют состояние, остаются интерактивными и не перерисовываются заново. Макет экспортируется по умолчанию из файла `layout.tsx` и принимает проп `children` (страница или вложенный макет).

---

## Создание вложенного маршрута

Вложенный маршрут состоит из нескольких URL‑сегментов, например `/blog/[slug]`:

- `/` — корневой сегмент
- `blog` — сегмент
- `[slug]` — листовой динамический сегмент

В Next.js:

- Папки определяют сегменты маршрутов (и соответствуют сегментам в URL).
- Файлы (`page`, `layout` и др.) определяют UI для сегмента.


Чтобы создать маршрут для конкретного поста, добавьте папку `[slug]` и файл `page.tsx`:

Пример: `app/blog/[slug]/page.tsx`


Оборачивание имени папки в квадратные скобки (например, `[slug]`) создаёт динамический сегмент, что позволяет генерировать множество страниц на основе данных (посты, товары и т. п.).

---

## Вложенные макеты

Макеты наследуются по иерархии папок: родительский `layout.tsx` оборачивает дочерний через `children`. Добавьте `layout.tsx` в нужный сегмент, чтобы создать его локальный макет.


Комбинация: корневой `app/layout.tsx` оборачивает `app/blog/layout.tsx`, а тот — `app/blog/page.tsx` и `app/blog/[slug]/page.tsx`.

---

## Динамический сегмент и доступ к params

Динамические сегменты позволяют генерировать маршруты из данных. Чтобы создать динамический сегмент, оберните имя папки в `[]`: `[segmentName]`.

Вложенные `layout` в динамических сегментах также получают доступ к `params`.

---

## Рендеринг с поисковыми параметрами (search params)

В серверной странице доступ к query‑параметрам осуществляется через проп `searchParams`:

Использование `searchParams` включает динамический рендеринг (нужен входящий запрос, чтобы прочитать параметры).

- Для клиентских компонентов используйте хук `useSearchParams`.
- Если параметры нужны только в обработчиках событий и не должны вызывать перерисовку, можно локально использовать `new URLSearchParams(window.location.search)`.

Когда что использовать:

- Если параметры нужны, чтобы загрузить данные для страницы (пагинация, фильтры из БД) — используйте проп `searchParams`.
- Если параметры используются только на клиенте для локальной фильтрации уже загруженных данных — используйте `useSearchParams`.

---

## Навигация между страницами (Link)

Используйте компонент `<Link>` для навигации: это обёртка над `<a>` с префетчем и клиентской навигацией.


Полезно знать: `<Link>` — основной способ навигации. Для продвинутых сценариев используйте `useRouter`.

---

## Вспомогательные типы для пропсов маршрутов (Route Props Helpers)

Next.js предоставляет утилитарные типы, которые выводят `params` и именованные слоты из структуры маршрутов:

- `PageProps` — пропсы страниц, включая `params` и `searchParams`.
- `LayoutProps` — пропсы макетов, включая `children` и именованные слоты (например, папки вида `@analytics`).

Полезно знать:

- Для статических маршрутов `params` выводится как `{}`.
- `PageProps`, `LayoutProps` — глобальные, импорты не требуются.
- Генерация типов: при `next dev`, `next build` или `next typegen`.


