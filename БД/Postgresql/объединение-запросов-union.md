## Объединение запросов, оператор UNION

Результаты выполнения SQL запросов можно объединять. Для этого существует оператор UNION.

```sql
SELECT поля_таблиц FROM список_таблиц ...
UNION [ALL]
SELECT поля_таблиц FROM список_таблиц ... ;
```
Общая структура запроса с UNION

UNION по умолчанию убирает повторения в результирующей таблице. Для отображения с повторением используется необязательный параметр ALL.

Важно: не путайте операции объединения запросов с операциями объединения таблиц (JOIN) и подзапросами.

Объединение запросов оператором UNION выполняется для таблиц, никак не связанных, но со схожей структурой.

## Требования к UNION

Для корректной работы UNION нужно, чтобы результирующие таблицы каждого из SQL запросов имели:
- одинаковое число столбцов
- одинаковые типы данных в соответствующих столбцах
- столбцы в той же последовательности

```sql
SELECT good_name FROM Goods
UNION
SELECT member_name FROM FamilyMembers;
```
Выводит наименование всех товаров и имена всех членов семьи (пример условной задачи)

## Оператор INTERSECT

INTERSECT комбинирует два запроса SELECT, но возвращает записи только первого SELECT, которые имеют совпадения во втором элементе SELECT.

```sql
SELECT поля_таблиц FROM список_таблиц ...
INTERSECT [ALL]
SELECT поля_таблиц FROM список_таблиц ... ;
```
Общая структура запроса с INTERSECT

INTERSECT возвращает только те строки, которые присутствуют в обоих результатах запросов.

## Оператор EXCEPT

EXCEPT комбинирует два запроса SELECT, но возвращает записи только первого SELECT, которые не имеют совпадения во втором элементе SELECT.

```sql
SELECT поля_таблиц FROM список_таблиц ...
EXCEPT [ALL]
SELECT поля_таблиц FROM список_таблиц ... ;
```
Общая структура запроса с EXCEPT

EXCEPT возвращает только те строки из первого запроса, которых нет во втором запросе.

## Разница между UNION, INTERSECT и EXCEPT

UNION:
- Объединяет результаты обоих запросов
- Убирает дубликаты (без ALL)

INTERSECT:
- Возвращает только общие записи из обоих запросов
- Пересечение множеств

EXCEPT:
- Возвращает записи из первого запроса, которых нет во втором
- Разность множеств

## Использование ALL

Все три оператора поддерживают модификатор ALL:
- UNION ALL — сохраняет все строки, включая дубликаты
- INTERSECT ALL — сохраняет все совпадающие строки
- EXCEPT ALL — исключает совпадающие строки по количеству вхождения
