## Строковый тип данных

Строковый тип данных является наиболее используемым типом данных. Благодаря ему в базе данных хранятся как текстовые, так и различные двоичные данные (например, картинки).

## Типы строковых данных в PostgreSQL

### CHARACTER и VARCHAR

| Тип | Описание | Диапазон символов |
|-----|----------|-------------------|
| `CHAR(n)` | Содержит текстовые строки фиксированной длины. Дополняется пробелами до указанной длины. | Длина может быть любой в диапазоне от 1 до 10,485,760 |
| `VARCHAR(n)` | Содержит текстовые строки переменной длины с ограничением. | Длина может быть любой в диапазоне от 1 до 10,485,760 |
| `TEXT` | Содержит текстовые строки неограниченной переменной длины. | Практически неограниченная длина (до 1 ГБ) |

## Особенности типов

### CHAR(n)

Фиксированная длина:
- Если строка короче указанной длины, она дополняется пробелами
- Всегда занимает n байт памяти

Пример:

```sql
CREATE TABLE Example (
    code CHAR(5)
);

INSERT INTO Example (code) VALUES ('ABC');
```

Значение `'ABC'` будет сохранено как `'ABC  '` (с двумя пробелами).

### VARCHAR(n)

Переменная длина с ограничением:
- Хранит только фактические символы
- Не дополняется пробелами
- Занимает столько памяти, сколько нужно для хранения данных (плюс небольшой overhead)

Пример:

```sql
CREATE TABLE Users (
    username VARCHAR(50),
    email VARCHAR(255)
);

INSERT INTO Users (username, email) 
VALUES ('john_doe', 'john@example.com');
```

### TEXT

Неограниченная переменная длина:
- Может хранить текст практически любой длины (до 1 ГБ)
- Не требует указания максимальной длины
- Идеален для хранения больших текстов

Пример:

```sql
CREATE TABLE Articles (
    title VARCHAR(255),
    content TEXT
);

INSERT INTO Articles (title, content) 
VALUES ('Article Title', 'Very long article content...');
```

## Рекомендации по использованию

Используйте `CHAR(n)`:
- Когда длина данных фиксирована (например, коды стран, почтовые индексы определённого формата)
- Когда все значения имеют одинаковую длину

Используйте `VARCHAR(n)`:
- Когда длина данных переменная, но имеет логическое ограничение
- Для имён пользователей, email адресов, названий
- Когда нужна валидация максимальной длины

Используйте `TEXT`:
- Для больших текстов без ограничения длины
- Для описаний, статей, комментариев
- Когда максимальная длина неизвестна или не имеет значения

## Важное замечание

В PostgreSQL тип `TEXT` предпочтительнее использовать вместо `VARCHAR` без ограничения длины, так как они имеют одинаковую производительность.

Вместо:

```sql
CREATE TABLE Posts (
    content VARCHAR
);
```

Лучше использовать:

```sql
CREATE TABLE Posts (
    content TEXT
);
```

## Производительность

Все три типа (`CHAR`, `VARCHAR`, `TEXT`) имеют схожую производительность в PostgreSQL:
- Нет значительной разницы в скорости операций чтения/записи
- Основное различие — в способе хранения и валидации данных
- `CHAR` может быть менее эффективным из-за дополнения пробелами

## Примеры использования

```sql
CREATE TABLE Products (
    sku CHAR(10),
    name VARCHAR(255) NOT NULL,
    description TEXT,
    category VARCHAR(50)
);

INSERT INTO Products (sku, name, description, category) 
VALUES 
    ('PROD000001', 'Laptop', 'High-performance laptop with...', 'Electronics'),
    ('PROD000002', 'Mouse', 'Wireless optical mouse', 'Accessories');
```

В этом примере:
- `sku` — фиксированная длина (всегда 10 символов)
- `name` — переменная длина с ограничением 255 символов
- `description` — неограниченная длина для подробного описания
- `category` — переменная длина с ограничением 50 символов
