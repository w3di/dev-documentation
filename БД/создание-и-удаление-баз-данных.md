## Создание и удаление баз данных

При написании SQL запросов мы активно используем таблицы. Сами же таблицы хранятся в рамках конкретных баз данных.

## Создание базы данных

Синтаксис создания базы данных:

```sql
CREATE DATABASE имя_базы_данных;
```

Правила именования:
- Можно использовать буквы, цифры, символы `_` и `$`
- Имя не может начинаться с цифры
- Не может содержать специальные символы (кроме подчеркивания)
- Максимальная длина имени — 63 знака

Проверка созданных баз данных:

```sql
SELECT datname FROM pg_database WHERE datistemplate = false;
```

Результат:

```
datname
user_database_1
user_database_2
postgres
```

Обратите внимание, что кроме пользовательских баз данных PostgreSQL также содержит служебные базы данных: `postgres`, `template0`, `template1`.

## Удаление базы данных

Удаление базы данных осуществляется с помощью оператора `DROP DATABASE`:

```sql
DROP DATABASE имя_базы_данных;
```

## Конструкция IF [NOT] EXISTS

При создании базы данных или при её удалении может возникнуть ошибка:
- База данных с таким именем уже существует (при создании)
- Данной базы данных не существует (при удалении)

Для таких случаев существует конструкция `IF [NOT] EXISTS`.

Создание базы данных только при условии, что она пока не существует:

```sql
CREATE DATABASE IF NOT EXISTS имя_базы_данных;
```

Удаление базы данных только при условии, что она существует:

```sql
DROP DATABASE IF EXISTS имя_базы_данных;
```

## Системная таблица pg_database

Таблица `pg_database` содержит информацию обо всех базах данных в PostgreSQL.

Основные столбцы:
- `datname` — имя базы данных
- `datistemplate` — флаг, указывающий, является ли база данных шаблоном

Просмотр всех баз данных:

```sql
SELECT * FROM pg_database;
```

Просмотр только пользовательских баз данных:

```sql
SELECT datname FROM pg_database WHERE datistemplate = false;
```

## Важные моменты

- Нельзя удалить базу данных, к которой подключены активные сеансы
- При удалении базы данных все её объекты (таблицы, функции, процедуры) также удаляются
- Операции создания и удаления баз данных требуют соответствующих прав доступа
- Служебные базы данных PostgreSQL (`postgres`, `template0`, `template1`) не следует удалять
