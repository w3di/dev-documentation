# Сетевой уровень (Network Layer)

## Описание
Сетевой уровень (Network Layer) - третий уровень модели OSI, обеспечивающий логическую адресацию и маршрутизацию пакетов между различными сетями, независимо от физической топологии и среды передачи данных.

## Основные функции
- **Логическая адресация** - использование IP-адресов для идентификации устройств в глобальной сети
- **Маршрутизация** - определение оптимального пути передачи пакетов между сетями
- **Фрагментация пакетов** - разбиение больших пакетов на меньшие для передачи через сети с разными MTU
- **Сборка пакетов** - восстановление исходных пакетов из фрагментов на стороне получателя
- **Управление трафиком** - контроль перегрузок и приоритизация трафика

## Структура данных
- **Пакет (Packet)** - единица данных сетевого уровня, содержащая IP-заголовок и полезные данные
- **IP-адреса** - 32-битные (IPv4) или 128-битные (IPv6) логические адреса для глобальной идентификации
- **IP-заголовок** - содержит адреса отправителя и получателя, TTL, протокол, контрольную сумму
- **Маршрутная таблица** - база данных маршрутов для определения следующего прыжка

## Процессы передачи данных
- **Инкапсуляция** - данные с верхних уровней помещаются в конверт с служебной информацией
- **Декапсуляция** - извлечение данных из конверта при передаче с нижних уровней на верхние

## Аналогия
Конверт внутри конверта:
- Внешний конверт = канальный уровень (MAC-адреса)
- Внутренний конверт = сетевой уровень (IP-адреса)

## Протоколы
- **IP** (Internet Protocol) - основной протокол маршрутизации
- **ICMP** (Internet Control Message Protocol) - для диагностики сети
- **PING** - утилита для проверки доступности узлов

## Сетевые устройства
- **Маршрутизаторы (Routers)** - устройства для маршрутизации между сетями
- **Протоколы маршрутизации** - OSPF, BGP, RIP и др.

## Характеристики
- **Межсетевая связь** - обеспечивает связь между различными сетями (internetworking)
- **Логическая адресация** - использует IP-адреса для глобальной идентификации устройств
- **Best-effort доставка** - не гарантирует доставку, но обеспечивает максимальные усилия
- **Протокол-независимость** - может работать с различными протоколами транспортного уровня
- **Масштабируемость** - поддерживает сети любого размера от локальных до глобальных

## Конспект из лекции

> "Сетевой уровень вводит термин маршрутизация и, соответственно, IP-адрес. Именно на этом уровне происходит маршрутизация трафика как таковая. Если мы хотим попасть на какой-то сайт, то мы отправляем DNS-запрос, получаем ответ в виде IP-адреса и подставляем его в пакет."

> "Да-да, если на втором уровне мы используем термин frame-кадр, то здесь мы используем пакет. Что еще за пакет? Помните аналогию с конвертом? Тут такое дело, что внутри того конверта лежат еще не сами данные, а еще один конверт. Только у него в полях отправителя и получателя написаны адреса другого уровня — сетевого, те самые IP-адреса."

> "Процесс, когда данные передаются с верхних уровней на нижние, называется инкапсуляцией данных, а когда, наоборот, с нижних на верхние — декапсуляцией. То есть данные, приходящие с верхних уровней, на каждых последующих уровнях как бы кладутся в конверт с полезной информацией. И когда устройство или приложение этого уровня получает конверт, оно знает, что с ним делать благодаря этой информации."

> "Кстати, именно на сетевом уровне при помощи протокола ICMP мы используем утилиту PING, которая помогает нам определить наличие проблем в сети. Из устройств здесь живет его величество маршрутизатор и все его слуги — протоколы маршрутизации, которые занимаются передачей данных от источника к получателю только уже на уровень повыше между разными сетями."
