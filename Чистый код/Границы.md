### Использование стороннего кода
- Изолируйте внешний код — сторонние библиотеки и чужие модули не должны быть видны всему приложению
- Не раскрывайте детали реализации — в публичных интерфейсах не должно быть технических структур и низкоуровневых решений
- Проектируйте интерфейсы под потребности системы — используйте не «как удобно библиотеке», а «как нужно домену»
- Сужайте интерфейсы — чем меньше доступных операций, тем меньше способов использовать код неправильно
- Локализуйте опасные и нестабильные места — всё, что может измениться или сломаться, должно быть сосредоточено в одном месте
- Клиентский код не должен делать лишнюю работу — пользователь интерфейса не должен знать, как именно хранятся данные и как с ними работать
- Защищайте инварианты архитектурно — правильное использование должно быть единственно возможным, а не «по договорённости»
- Минимизируйте связность между модулями — изменения в одном месте не должны расползаться по системе

### Исследование и анализ границ
- Тестирование чужого кода не входит в наши обязанности, но написание тестов для стороннего кода, используемого в наших продуктах, в наших же интересах
- Вместо того чтобы экспериментировать и опробовать новую библиотеку в коде продукта, можно написать тесты, проверяющие наше понимание стороннего кода
- Такие тесты называются учебными тестами

### Учебные тесты
- Учебные тесты ничего не стоят — API всё равно приходится изучать, а написание тестов является простым способом получения необходимой информации в изоляции от рабочего кода
- Учебные тесты приносят дополнительную прибыль — при выходе новых версий сторонних пакетов мы можем провести учебные тесты и выяснить, не изменилось ли поведение пакета
- Учебные тесты позволяют убедиться в том, что сторонние пакеты, используемые в коде, работают именно так, как мы ожидаем
- Без граничных тестов, упрощающих процесс миграции, появляется причина задержаться на старой версии дольше необходимого

### Использование несуществующего кода
- Не ждите чужой код — разработка не должна останавливаться из-за отсутствия внешней реализации
- Работайте с предположениями, а не с пустотой
- Определите свой интерфейс — сформулируйте контракт так, как он нужен вашей системе
- Интерфейс должен отражать намерение и предметную задачу, а не ограничения будущей реализации
- Подключайте чужой код через адаптер — внешний API не должен проникать в бизнес-код
- Адаптер переводит внешний интерфейс в ваш и изолирует несовпадения
- Изменения держите на границе — эволюция внешнего кода должна затрагивать только адаптер, а не всю систему
- Тесты держите на границе — граница является естественной точкой для подмен и проверок
- Клиентский код тестируется через фейки, а корректность работы с внешним API — отдельными граничными тестами

### Чистые границы
- В хорошей программной архитектуре внесение изменений обходится без значительных затрат и усилий по переработке
- Старайтесь, чтобы ваш код поменьше знал о специфических подробностях реализации стороннего кода
- Лучше зависеть от того, что находится под вашим контролем, чем от тех факторов, которые вы не контролируете
