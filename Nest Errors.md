# HTTP Исключения в NestJS

## Основные HTTP исключения и их применение

### 400 BadRequestException
- **Когда использовать**: Запрос содержит некорректные данные или синтаксические ошибки
- **Примеры**:
  - Неверный формат JSON
  - Отсутствующие обязательные поля
  - Неправильный формат даты
  - Некорректные параметры запроса

### 401 UnauthorizedException
- **Когда использовать**: Пользователь не аутентифицирован
- **Примеры**:
  - Отсутствие токена авторизации
  - Истекший токен
  - Неверные учетные данные

### 403 ForbiddenException
- **Когда использовать**: Пользователь аутентифицирован, но не имеет прав доступа
- **Примеры**:
  - Попытка доступа к чужому ресурсу
  - Недостаточные права для выполнения операции
  - Заблокированный доступ

### 404 NotFoundException
- **Когда использовать**: Запрашиваемый ресурс не найден
- **Примеры**:
  - Несуществующий пользователь
  - Отсутствующий документ
  - Неверный URL

### 405 MethodNotAllowedException
- **Когда использовать**: HTTP метод не поддерживается для данного эндпоинта
- **Примеры**:
  - POST запрос на GET-only эндпоинт
  - DELETE запрос на не поддерживающий удаление ресурс

### 406 NotAcceptableException
- **Когда использовать**: Сервер не может предоставить ответ в формате, указанном в заголовке Accept
- **Примеры**:
  - Запрос JSON, когда сервер может вернуть только XML
  - Неподдерживаемый формат ответа

### 408 RequestTimeoutException
- **Когда использовать**: Сервер не получил полный запрос в течение установленного времени
- **Примеры**:
  - Долгое время ожидания ответа
  - Превышение таймаута соединения

### 409 ConflictException
- **Когда использовать**: Конфликт с текущим состоянием ресурса
- **Примеры**:
  - Попытка создать дублирующую запись
  - Конфликт версий при обновлении
  - Одновременное изменение одного ресурса

### 410 GoneException
- **Когда использовать**: Ресурс больше недоступен и не будет доступен в будущем
- **Примеры**:
  - Удаленный контент
  - Временно недоступный ресурс с неизвестной датой восстановления

### 413 PayloadTooLargeException
- **Когда использовать**: Размер запроса превышает допустимый лимит
- **Примеры**:
  - Слишком большой файл
  - Превышение лимита размера тела запроса

### 415 UnsupportedMediaTypeException
- **Когда использовать**: Формат данных в запросе не поддерживается сервером
- **Примеры**:
  - Неподдерживаемый формат файла
  - Неверный Content-Type

### 422 UnprocessableEntityException
- **Когда использовать**: Запрос синтаксически верен, но содержит семантические ошибки
- **Примеры**:
  - Неверные бизнес-правила
  - Некорректные связи между данными
  - Нарушение валидации

### 429 TooManyRequestsException
- **Когда использовать**: Слишком много запросов от клиента
- **Примеры**:
  - Превышение лимита запросов
  - Rate limiting

### 500 InternalServerErrorException
- **Когда использовать**: Внутренняя ошибка сервера
- **Примеры**:
  - Неожиданные ошибки в коде
  - Проблемы с базой данных
  - Сбои в работе внешних сервисов

### 501 NotImplementedException
- **Когда использовать**: Сервер не поддерживает функциональность, необходимую для выполнения запроса
- **Примеры**:
  - Нереализованные методы
  - Экспериментальные функции

### 502 BadGatewayException
- **Когда использовать**: Сервер получил неверный ответ от вышестоящего сервера
- **Примеры**:
  - Проблемы с прокси-сервером
  - Ошибки в микросервисной архитектуре

### 503 ServiceUnavailableException
- **Когда использовать**: Сервер временно не может обработать запрос
- **Примеры**:
  - Перегрузка сервера
  - Техническое обслуживание
  - Временные проблемы с ресурсами

### 504 GatewayTimeoutException
- **Когда использовать**: Время ожидания ответа от вышестоящего сервера истекло
- **Примеры**:
  - Долгое время ответа от зависимого сервиса
  - Таймаут в микросервисной архитектуре

### 505 HttpVersionNotSupportedException
- **Когда использовать**: Сервер не поддерживает версию HTTP протокола, указанную в запросе
- **Примеры**:
  - Использование устаревшей версии HTTP
  - Несовместимость протоколов

### 508 LoopDetectedException
- **Когда использовать**: Обнаружен бесконечный цикл в запросе
- **Примеры**:
  - Циклические редиректы
  - Бесконечные циклы в маршрутизации

### 511 NetworkAuthenticationRequiredException
- **Когда использовать**: Требуется аутентификация сети
- **Примеры**:
  - Доступ через капчу
  - Аутентификация в корпоративной сети

## Рекомендации по использованию

1. **Выбирайте точные исключения**: Используйте наиболее подходящее исключение для конкретной ситуации
2. **Добавляйте информативные сообщения**: Включайте понятные описания ошибок
3. **Логируйте ошибки**: Записывайте важные детали для отладки
4. **Обрабатывайте исключения**: Создавайте глобальные обработчики для единообразной обработки ошибок
5. **Документируйте API**: Указывайте возможные ошибки в документации API